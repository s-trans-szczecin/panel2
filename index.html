<!DOCTYPE html>
<html lang="pl">
<head>
  <meta charset="UTF-8">
  <title>Panel Transport</title>

  <!-- Firebase SDK (COMPAT) -->
  <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-auth-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-database-compat.js"></script>

  <!-- Leaflet (MAPA) -->
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css">
  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>

  <style>
    body { margin: 0; font-family: Arial; }
    #logoScreen, #mapScreen, #login-container, #panel-container {
      display: none;
      padding: 20px;
    }
    #map { height: 400px; }
  </style>

  <script>
    // ðŸ”´ FIREBASE CONFIG
    const firebaseConfig = {
      apiKey: "AIzaSyAjkKqpO-3_Ltp3Jofc4oDu81Y5pb2IsQk",
      authDomain: "fir-trans-10591.firebaseapp.com",
      databaseURL: "https://fir-trans-10591-default-rtdb.europe-west1.firebasedatabase.app",
      projectId: "fir-trans-10591",
      storageBucket: "fir-trans-10591.appspot.com",
      messagingSenderId: "454345201943",
      appId: "1:454345201943:web:panel"
    };

    firebase.initializeApp(firebaseConfig);
    const auth = firebase.auth();
    const db = firebase.database();

    let currentUser = null;

    function showLogo() {
      document.getElementById("logoScreen").style.display = "block";
      setTimeout(() => {
        document.getElementById("logoScreen").style.display = "none";
        showMap();
      }, 3000);
    }

    function showMap() {
      document.getElementById("mapScreen").style.display = "block";

      const map = L.map('map').setView([20, 0], 2);
      L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png').addTo(map);

      setTimeout(() => {
        document.getElementById("mapScreen").style.display = "none";
        document.getElementById("login-container").style.display = "block";
      }, 3000);
    }

    function login() {
      const email = document.getElementById("email").value;
      const password = document.getElementById("password").value;

      auth.signInWithEmailAndPassword(email, password)
        .then(user => {
          currentUser = user.user;
          document.getElementById("login-container").style.display = "none";
          document.getElementById("panel-container").style.display = "block";
        })
        .catch(err => {
          document.getElementById("loginError").innerText = err.message;
        });
    }

    window.onload = showLogo;
  </script>
</head>

<body>

  <div id="logoScreen">
    <h1>LOGO ANIMOWANE</h1>
  </div>

  <div id="mapScreen">
    <h2>Mapa Å›wiata</h2>
    <div id="map"></div>
  </div>

  <div id="login-container">
    <h2>Logowanie</h2>
    <input id="email" placeholder="email">
    <input id="password" type="password" placeholder="hasÅ‚o">
    <button onclick="login()">Zaloguj</button>
    <p id="loginError" style="color:red"></p>
  </div>

  <div id="panel-container">
    <h2>Panel (zalogowano)</h2>
  </div>

</body>
</html>
