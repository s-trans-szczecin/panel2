<!DOCTYPE html>
<html lang="pl">
<head>
<meta charset="UTF-8">
<title>S-TRANS | Fleet OS</title>

<script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-auth-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-database-compat.js"></script>

<link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"/>
<script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>

<style>
*{box-sizing:border-box}
body{
  margin:0;
  font-family:Segoe UI;
  background:#0b0f1a;
  color:#fff;
  font-size:12px;
  overflow:hidden;
}

/* INTRO */
#intro{position:fixed;inset:0;background:black;z-index:3000}
#intro video{width:100%;height:100%;object-fit:cover}

/* LOGIN */
#login{position:fixed;inset:0;display:none;align-items:center;justify-content:center;background:#000}
#loginBox{width:320px;background:#111;padding:24px;border-radius:14px;box-shadow:0 0 30px #39ff14}
#loginBox input,#loginBox button{width:100%;padding:8px;margin-top:8px}
#loginBox button{background:#39ff14;border:none;font-weight:bold}

/* PANEL */
#panel{display:none;height:100vh;flex-direction:column}

/* TOPBAR */
#topbar{
  height:48px;
  display:flex;
  align-items:center;
  justify-content:space-between;
  padding:0 12px;
  background:#0a1428;
  border-bottom:1px solid rgba(255,255,255,.08);
}

/* ===== HOLOGRAM LOGO ===== */
#logo{
  font-size:20px;
  font-weight:900;
  letter-spacing:3px;
  position:relative;
  color:#39ff14;
  transform-style:preserve-3d;
  animation:holoRotate 10s linear infinite, holoPulse 3s ease-in-out infinite;
  text-shadow:
    0 0 6px rgba(57,255,20,.6),
    0 0 18px rgba(57,255,20,.5),
    0 0 32px rgba(57,255,20,.35);
}

#logo::after{
  content:"";
  position:absolute;
  inset:0;
  background:linear-gradient(
    to bottom,
    rgba(57,255,20,.0),
    rgba(57,255,20,.25),
    rgba(57,255,20,.0)
  );
  animation:holoScan 2.5s linear infinite;
  pointer-events:none;
}

@keyframes holoRotate{
  from{transform:rotateY(0deg)}
  to{transform:rotateY(360deg)}
}

@keyframes holoPulse{
  0%,100%{opacity:.9}
  50%{opacity:1}
}

@keyframes holoScan{
  from{transform:translateY(-100%)}
  to{transform:translateY(100%)}
}

/* KPI */
#kpi{display:flex;gap:4px;padding:4px}
.kpi{flex:1;background:#0f1629;border-radius:8px;padding:4px;text-align:center}
.kpi b{color:#39ff14}

/* MAIN */
#main{
  flex:1;
  display:grid;
  grid-template-columns:1.3fr 1fr;
  gap:6px;
  padding:6px;
  min-height:0;
}

/* BOX */
.box{
  background:rgba(15,22,41,.92);
  border-radius:8px;
  padding:10px;
  overflow:auto;
  border:1px solid rgba(255,255,255,.08);
  box-shadow:0 0 20px rgba(0,0,0,.4)
}
h4{margin:2px 0 8px;color:#b6ffb0;font-size:13px}

/* TABLE */
table{width:100%;border-collapse:collapse}
th,td{padding:6px;border-bottom:1px solid rgba(255,255,255,.12);font-size:12px}
th{color:#b6ffb0;text-align:left}

/* BUTTONS */
button.small{
  font-size:11px;
  padding:4px 8px;
  border:none;
  border-radius:6px;
  cursor:pointer;
  transition:transform .1s ease
}
button.small:hover{transform:scale(1.03)}
button.edit{background:#39ff14;color:#000}
button.del{background:#ff4444;color:#fff}

/* MAP */
#map{height:100%;border-radius:8px;border:1px solid rgba(255,255,255,.12)}

/* MOBILE BTN */
.btnMobile{
  background:#39ff14;
  color:#000;
  font-weight:900;
  padding:6px 12px;
  border-radius:10px;
  border:1px solid #2be214;
  box-shadow:0 0 18px rgba(57,255,20,.35);
  display:flex;
  align-items:center;
  gap:8px;
  cursor:pointer
}
.btnMobile img{width:18px;height:18px}
</style>
</head>

<body>

<div id="intro">
  <video autoplay muted>
    <source src="intro.mp4" type="video/mp4">
  </video>
</div>

<div id="login">
  <div id="loginBox">
    <h3>Logowanie</h3>
    <input id="email" placeholder="Email">
    <input id="password" type="password" placeholder="Hasło">
    <button id="loginBtn">Zaloguj</button>
    <p id="loginError"></p>
  </div>
</div>

<div id="panel">

  <div id="topbar">
    <div id="logo">S-TRANS</div>
    <div style="display:flex;gap:8px;align-items:center">
      <button class="btnMobile"
        onclick="window.open('https://s-trans-szczecin.github.io/panel2/pobierz_apke.html','_blank')">
        <img src="https://cdn-icons-png.flaticon.com/512/888/888857.png">
        Pobierz aplikację mobilną
      </button>
      <button onclick="logout()" class="small del">Wyloguj</button>
    </div>
  </div>

  <div id="kpi">
    <div class="kpi">Zlecenia<br><b id="kpiOrders">0</b></div>
    <div class="kpi">Kierowcy<br><b id="kpiDrivers">0</b></div>
    <div class="kpi">Online<br><b id="kpiOnline">0</b></div>
  </div>

  <div id="main">
    <!-- reszta Twojego panelu BEZ ZMIAN -->
  </div>
</div>

<script>
setTimeout(()=>{
  intro.style.display="none";
  login.style.display="flex";
},4000);

firebase.initializeApp({
  apiKey:"AIzaSyAqm4Z8xeZ1mYelt4giRQknCWG6RMzAs8c",
  authDomain:"fir-trans-projekt.firebaseapp.com",
  databaseURL:"https://fir-trans-projekt-default-rtdb.europe-west1.firebasedatabase.app",
  projectId:"fir-trans-projekt"
});

const auth=firebase.auth();
loginBtn.onclick=()=>{
  auth.signInWithEmailAndPassword(email.value,password.value)
  .then(()=>{
    login.style.display="none";
    panel.style.display="flex";
  })
  .catch(e=>loginError.innerText=e.message);
};

function logout(){
  auth.signOut().then(()=>location.reload());
}
</script>

</body>
</html>
